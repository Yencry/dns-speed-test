import{j as r,B as u,C as m,a as g,L as h,b as p,p as b,c as f,d as x}from"./index-sWb8bUNw.js";m.register(g,h,p,b,f,x);const N={AdGuard:/^AdGuard/i,Cloudflare:/^Cloudflare/i,Mullvad:/^Mullvad/i,Yandex:/^Yandex/i,Google:/^Google/i,OpenDNS:/^OpenDNS/i,"Canadian Shield":/^Canadian Shield/i,CleanBrowsing:/^(CleanBrowsing|Doh\.cleanbrowsing)/i,ControlD:/^(ControlD|Controld)/i,Quad9:/^(Quad9|Doh9\.9\.9\.9)/i,LibreDNS:/^(LibreDNS|Libredns)/i,BlahDNS:/^BlahDNS/i,DNSWarden:/^DNSWarden/i,Adhole:/^Adhole/i,DNS0:/^DNS0/i,"Pi-DNS":/^(Pi-dns|Doh\.(centraleu|eastus|northeu|westus)\.pi-dns)/i,Restena:/^Restena/i,DNSPod:/^(DNSPod|Doh\.pub)/i,NextDNS:/^NextDNS/i};function v(i){let a=null;for(const[t,s]of Object.entries(N))if(s.test(i.name)){a=t;break}return a||(i.url&&/quad9/i.test(i.url)?a="Quad9":a=i.name),a}function D(i){const a={};return(i||[]).forEach(t=>{if(!t||t.average==="Unavailable"||typeof t.average!="number")return;const s=v(t),o=a[s];(!o||t.average<o.average)&&(a[s]=t)}),Object.entries(a).map(([t,s])=>({...s,name:t})).sort((t,s)=>t.average-s.average)}function c(i,a){if(!a||a.length===0)return"#3b82f6";const t=a.map(e=>e.average).filter(e=>e!==null&&e!=="Unavailable"),s=Math.min(...t),o=Math.max(...t);if(s===o)return"#10b981";const l=(i-s)/(o-s);let n;if(l<=.33){const e=l/.33;n={r:Math.round(16+43*e),g:Math.round(185+-55*e),b:Math.round(129+117*e)}}else if(l<=.66){const e=(l-.33)/.33;n={r:Math.round(59+109*e),g:Math.round(130+-45*e),b:Math.round(246+1*e)}}else{const e=(l-.66)/.34;n={r:Math.round(168+71*e),g:Math.round(85+-17*e),b:Math.round(247+-179*e)}}return`rgb(${n.r}, ${n.g}, ${n.b})`}function y({results:i}){const a=D(i);if(a.length===0)return null;const t=document.documentElement.classList.contains("dark"),s={labels:a.map(n=>n.name),datasets:[{label:"平均响应时间 (ms)",data:a.map(n=>n.average),backgroundColor:a.map(n=>c(n.average,a).replace("rgb","rgba").replace(")",", 0.8)")),borderColor:a.map(n=>c(n.average,a)),borderWidth:2,borderRadius:6,borderSkipped:!1}]},o={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,animation:{duration:400,easing:"easeInOutQuart"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",titleColor:"#fff",bodyColor:"#e5e7eb",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:12,displayColors:!1,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{title:function(n){return n[0].label},label:function(n){const e=a[n.dataIndex],d=[];return typeof e.average=="number"&&d.push(`平均：${e.average.toFixed(2)} ms`),typeof e.min=="number"&&d.push(`最小：${e.min.toFixed(2)} ms`),typeof e.max=="number"&&d.push(`最大：${e.max.toFixed(2)} ms`),typeof e.median=="number"&&d.push(`中位数：${e.median.toFixed(2)} ms`),d}}}},scales:{x:{grid:{color:t?"rgba(156, 163, 175, 0.1)":"rgba(156, 163, 175, 0.15)",lineWidth:1},ticks:{color:t?"#9ca3af":"#6b7280",font:{size:11}},title:{display:!0,text:"响应时间 (ms)",color:t?"#d1d5db":"#374151",font:{size:13,weight:"bold"}}},y:{grid:{display:!1},ticks:{color:"rgba(224, 242, 254, 0.9)",font:{size:12,weight:"500"}},title:{display:!1}}}},l=Math.max(300,Math.min(800,a.length*35+100));return r.jsxs("div",{className:"w-full md:w-4/5 mx-auto mt-3 px-1 md:px-0",children:[r.jsx("div",{className:"mb-3 text-center",children:r.jsxs("p",{className:"text-xs text-sky-100/85",children:["当前显示 ",a.length," 个 DNS 服务商（每家取最快线路）"]})}),r.jsx("div",{className:"rounded-lg p-1 md:p-2 bg-transparent",children:r.jsx("div",{style:{height:`${l}px`},children:r.jsx(u,{data:s,options:o})})}),r.jsxs("div",{className:"mt-3 flex items-center justify-center gap-6 text-xs text-sky-100/85",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 rounded-sm bg-gradient-to-r from-green-500 to-blue-500"}),r.jsx("span",{children:"快速"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-3 rounded-sm bg-gradient-to-r from-purple-500 to-red-500"}),r.jsx("span",{children:"较慢"})]}),r.jsx("div",{className:"hidden md:block text-sky-100/70",children:"•"}),r.jsx("div",{className:"hidden md:block",children:"悬停柱状图查看详细数据"})]})]})}export{y as default};
